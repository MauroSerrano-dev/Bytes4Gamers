"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/login";
exports.ids = ["pages/api/login"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "(api)/./pages/api/login.js":
/*!****************************!*\
  !*** ./pages/api/login.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _src_backend_data_authentication__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../src/backend-data/authentication */ \"(api)/./src/backend-data/authentication.js\");\n/* harmony import */ var _src_backend_data_sessions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../src/backend-data/sessions */ \"(api)/./src/backend-data/sessions.js\");\n/* harmony import */ var _src_backend_data_users__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../src/backend-data/users */ \"(api)/./src/backend-data/users.js\");\n/* harmony import */ var _src_backend_services_validations__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../src/backend-services/validations */ \"(api)/./src/backend-services/validations.js\");\n\n\n\n\nasync function handler(req, res) {\n    if (req.method === \"POST\") {\n        const { usernameOrEmail , password  } = req.body;\n        const userByUsername = await (0,_src_backend_data_users__WEBPACK_IMPORTED_MODULE_2__.getUserByUsername)(usernameOrEmail);\n        const userByEmail = await (0,_src_backend_data_users__WEBPACK_IMPORTED_MODULE_2__.getUserByEmail)(usernameOrEmail);\n        let user = null;\n        if (!userByEmail && !userByUsername) {\n            return res.status(404).json({\n                message: \"O utilizador n\\xe3o foi encontrado!\"\n            });\n        }\n        if (!userByEmail) user = userByUsername;\n        else user = userByEmail;\n        if (user.password !== password) {\n            return res.status(401).json({\n                message: \"A password introduzida \\xe9 inv\\xe1lida!\"\n            });\n        }\n        const token = await (0,_src_backend_data_sessions__WEBPACK_IMPORTED_MODULE_1__.addSession)(user._id);\n        res.status(200).json({\n            token\n        });\n    } else if (req.method === \"GET\") {\n        const session = await (0,_src_backend_data_sessions__WEBPACK_IMPORTED_MODULE_1__.getSessionByToken)(req.headers.token);\n        const user1 = await (0,_src_backend_data_users__WEBPACK_IMPORTED_MODULE_2__.getUserById)(session.username);\n        return res.status(200).json({\n            user: user1\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvbG9naW4uanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBbUU7QUFDYTtBQUsxQztBQUNrQztBQUV6RCxlQUFlTyxPQUFPLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFO0lBQzlDLElBQUlELEdBQUcsQ0FBQ0UsTUFBTSxLQUFLLE1BQU0sRUFBRTtRQUN6QixNQUFNLEVBQUVDLGVBQWUsR0FBRUMsUUFBUSxHQUFFLEdBQUdKLEdBQUcsQ0FBQ0ssSUFBSTtRQUU5QyxNQUFNQyxjQUFjLEdBQUcsTUFBTVQsMEVBQWlCLENBQUNNLGVBQWUsQ0FBQztRQUMvRCxNQUFNSSxXQUFXLEdBQUcsTUFBTVosdUVBQWMsQ0FBQ1EsZUFBZSxDQUFDO1FBQ3pELElBQUlLLElBQUksR0FBRyxJQUFJO1FBRWYsSUFBSSxDQUFDRCxXQUFXLElBQUksQ0FBQ0QsY0FBYyxFQUFFO1lBQ25DLE9BQU9MLEdBQUcsQ0FBQ1EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7Z0JBQzFCQyxPQUFPLEVBQUUscUNBQWtDO2FBQzVDLENBQUMsQ0FBQztRQUNMLENBQUM7UUFDRCxJQUFJLENBQUNKLFdBQVcsRUFBRUMsSUFBSSxHQUFHRixjQUFjLENBQUM7YUFDbkNFLElBQUksR0FBR0QsV0FBVyxDQUFDO1FBRXhCLElBQUlDLElBQUksQ0FBQ0osUUFBUSxLQUFLQSxRQUFRLEVBQUU7WUFDOUIsT0FBT0gsR0FBRyxDQUFDUSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztnQkFDMUJDLE9BQU8sRUFBRSwwQ0FBb0M7YUFDOUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQztRQUVELE1BQU1DLEtBQUssR0FBRyxNQUFNbkIsc0VBQVUsQ0FBQ2UsSUFBSSxDQUFDSyxHQUFHLENBQUM7UUFDeENaLEdBQUcsQ0FBQ1EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7WUFBRUUsS0FBSztTQUFFLENBQUMsQ0FBQztJQUNsQyxPQUFPLElBQUlaLEdBQUcsQ0FBQ0UsTUFBTSxLQUFLLEtBQUssRUFBRTtRQUMvQixNQUFNWSxPQUFPLEdBQUcsTUFBTXBCLDZFQUFpQixDQUFDTSxHQUFHLENBQUNlLE9BQU8sQ0FBQ0gsS0FBSyxDQUFDO1FBQzFELE1BQU1KLEtBQUksR0FBRyxNQUFNWixvRUFBVyxDQUFDa0IsT0FBTyxDQUFDRSxRQUFRLENBQUM7UUFDaEQsT0FBT2YsR0FBRyxDQUFDUSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztZQUFFRixJQUFJLEVBQUVBLEtBQUk7U0FBRSxDQUFDLENBQUM7SUFDOUMsQ0FBQztBQUNILENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mdWxsc3RhY2svLi9wYWdlcy9hcGkvbG9naW4uanM/YWU4OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpbnNlcnRVc2VyIH0gZnJvbSBcIi4uLy4uL3NyYy9iYWNrZW5kLWRhdGEvYXV0aGVudGljYXRpb25cIjtcbmltcG9ydCB7IGFkZFNlc3Npb24sIGdldFNlc3Npb25CeVRva2VuIH0gZnJvbSBcIi4uLy4uL3NyYy9iYWNrZW5kLWRhdGEvc2Vzc2lvbnNcIjtcbmltcG9ydCB7XG4gIGdldFVzZXJCeUVtYWlsLFxuICBnZXRVc2VyQnlJZCxcbiAgZ2V0VXNlckJ5VXNlcm5hbWUsXG59IGZyb20gXCIuLi8uLi9zcmMvYmFja2VuZC1kYXRhL3VzZXJzXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZUZpZWxkcyB9IGZyb20gXCIuLi8uLi9zcmMvYmFja2VuZC1zZXJ2aWNlcy92YWxpZGF0aW9uc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGlmIChyZXEubWV0aG9kID09PSBcIlBPU1RcIikge1xuICAgIGNvbnN0IHsgdXNlcm5hbWVPckVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG5cbiAgICBjb25zdCB1c2VyQnlVc2VybmFtZSA9IGF3YWl0IGdldFVzZXJCeVVzZXJuYW1lKHVzZXJuYW1lT3JFbWFpbCk7XG4gICAgY29uc3QgdXNlckJ5RW1haWwgPSBhd2FpdCBnZXRVc2VyQnlFbWFpbCh1c2VybmFtZU9yRW1haWwpO1xuICAgIGxldCB1c2VyID0gbnVsbDtcblxuICAgIGlmICghdXNlckJ5RW1haWwgJiYgIXVzZXJCeVVzZXJuYW1lKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIk8gdXRpbGl6YWRvciBuw6NvIGZvaSBlbmNvbnRyYWRvIVwiLFxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICghdXNlckJ5RW1haWwpIHVzZXIgPSB1c2VyQnlVc2VybmFtZTtcbiAgICBlbHNlIHVzZXIgPSB1c2VyQnlFbWFpbDtcblxuICAgIGlmICh1c2VyLnBhc3N3b3JkICE9PSBwYXNzd29yZCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJBIHBhc3N3b3JkIGludHJvZHV6aWRhIMOpIGludsOhbGlkYSFcIixcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgYWRkU2Vzc2lvbih1c2VyLl9pZCk7XG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB0b2tlbiB9KTtcbiAgfSBlbHNlIGlmIChyZXEubWV0aG9kID09PSBcIkdFVFwiKSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25CeVRva2VuKHJlcS5oZWFkZXJzLnRva2VuKTtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0VXNlckJ5SWQoc2Vzc2lvbi51c2VybmFtZSk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdXNlcjogdXNlciB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImluc2VydFVzZXIiLCJhZGRTZXNzaW9uIiwiZ2V0U2Vzc2lvbkJ5VG9rZW4iLCJnZXRVc2VyQnlFbWFpbCIsImdldFVzZXJCeUlkIiwiZ2V0VXNlckJ5VXNlcm5hbWUiLCJ2YWxpZGF0ZUZpZWxkcyIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJ1c2VybmFtZU9yRW1haWwiLCJwYXNzd29yZCIsImJvZHkiLCJ1c2VyQnlVc2VybmFtZSIsInVzZXJCeUVtYWlsIiwidXNlciIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwidG9rZW4iLCJfaWQiLCJzZXNzaW9uIiwiaGVhZGVycyIsInVzZXJuYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/login.js\n");

/***/ }),

/***/ "(api)/./src/backend-data/authentication.js":
/*!********************************************!*\
  !*** ./src/backend-data/authentication.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"insertUser\": () => (/* binding */ insertUser)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mongodb */ \"(api)/./src/backend-data/mongodb.js\");\n\n\nconst DB_NAME = \"mongo-bytes4gamers\";\nconst COLLECTION_NAME = \"users\";\nasync function insertUser(user) {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_1__.getMongoCollection)(DB_NAME, COLLECTION_NAME);\n    await collection.insertOne(user);\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYmFja2VuZC1kYXRhL2F1dGhlbnRpY2F0aW9uLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBbUM7QUFDWTtBQUUvQyxNQUFNRSxPQUFPLEdBQUcsb0JBQW9CO0FBQ3BDLE1BQU1DLGVBQWUsR0FBRyxPQUFPO0FBRS9CLGVBQWVDLFVBQVUsQ0FBQ0MsSUFBSSxFQUFFO0lBQzlCLE1BQU1DLFVBQVUsR0FBRyxNQUFNTCw0REFBa0IsQ0FBQ0MsT0FBTyxFQUFFQyxlQUFlLENBQUM7SUFDckUsTUFBTUcsVUFBVSxDQUFDQyxTQUFTLENBQUNGLElBQUksQ0FBQyxDQUFDO0FBQ25DLENBQUM7QUFFcUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mdWxsc3RhY2svLi9zcmMvYmFja2VuZC1kYXRhL2F1dGhlbnRpY2F0aW9uLmpzP2YzYTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT2JqZWN0SWQgfSBmcm9tIFwibW9uZ29kYlwiO1xuaW1wb3J0IHsgZ2V0TW9uZ29Db2xsZWN0aW9uIH0gZnJvbSBcIi4vbW9uZ29kYlwiO1xuXG5jb25zdCBEQl9OQU1FID0gXCJtb25nby1ieXRlczRnYW1lcnNcIjtcbmNvbnN0IENPTExFQ1RJT05fTkFNRSA9IFwidXNlcnNcIjtcblxuYXN5bmMgZnVuY3Rpb24gaW5zZXJ0VXNlcih1c2VyKSB7XG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBhd2FpdCBnZXRNb25nb0NvbGxlY3Rpb24oREJfTkFNRSwgQ09MTEVDVElPTl9OQU1FKTtcbiAgYXdhaXQgY29sbGVjdGlvbi5pbnNlcnRPbmUodXNlcik7XG59XG5cbmV4cG9ydCB7IGluc2VydFVzZXIgfTtcbiJdLCJuYW1lcyI6WyJPYmplY3RJZCIsImdldE1vbmdvQ29sbGVjdGlvbiIsIkRCX05BTUUiLCJDT0xMRUNUSU9OX05BTUUiLCJpbnNlcnRVc2VyIiwidXNlciIsImNvbGxlY3Rpb24iLCJpbnNlcnRPbmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/backend-data/authentication.js\n");

/***/ }),

/***/ "(api)/./src/backend-data/mongodb.js":
/*!*************************************!*\
  !*** ./src/backend-data/mongodb.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getMongoCollection\": () => (/* binding */ getMongoCollection)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nconst URL = process.env.MONGO_URL ?? \"mongodb://localhost:27017\";\nlet client;\nasync function connectToMongo() {\n    if (!client) {\n        client = await new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(URL).connect();\n    }\n    return client;\n}\nasync function getMongoCollection(dbName, collectionName) {\n    const client = await connectToMongo();\n    return client.db(dbName).collection(collectionName);\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYmFja2VuZC1kYXRhL21vbmdvZGIuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFDO0FBQ3JDLE1BQU1DLEdBQUcsR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFNBQVMsSUFBSSwyQkFBMkI7QUFFaEUsSUFBSUMsTUFBTTtBQUNWLGVBQWVDLGNBQWMsR0FBRztJQUM1QixJQUFJLENBQUNELE1BQU0sRUFBRTtRQUNUQSxNQUFNLEdBQUcsTUFBTSxJQUFJTCxnREFBVyxDQUFDQyxHQUFHLENBQUMsQ0FBQ00sT0FBTyxFQUFFO0lBQ2pELENBQUM7SUFDRCxPQUFPRixNQUFNO0FBQ2pCLENBQUM7QUFFRCxlQUFlRyxrQkFBa0IsQ0FBQ0MsTUFBTSxFQUFFQyxjQUFjLEVBQUU7SUFDdEQsTUFBTUwsTUFBTSxHQUFHLE1BQU1DLGNBQWMsRUFBRTtJQUNyQyxPQUFPRCxNQUFNLENBQUNNLEVBQUUsQ0FBQ0YsTUFBTSxDQUFDLENBQUNHLFVBQVUsQ0FBQ0YsY0FBYyxDQUFDO0FBQ3ZELENBQUM7QUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Z1bGxzdGFjay8uL3NyYy9iYWNrZW5kLWRhdGEvbW9uZ29kYi5qcz85MTVmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSBcIm1vbmdvZGJcIlxuY29uc3QgVVJMID0gcHJvY2Vzcy5lbnYuTU9OR09fVVJMID8/IFwibW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxN1wiXG5cbmxldCBjbGllbnRcbmFzeW5jIGZ1bmN0aW9uIGNvbm5lY3RUb01vbmdvKCkge1xuICAgIGlmICghY2xpZW50KSB7XG4gICAgICAgIGNsaWVudCA9IGF3YWl0IG5ldyBNb25nb0NsaWVudChVUkwpLmNvbm5lY3QoKVxuICAgIH1cbiAgICByZXR1cm4gY2xpZW50XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldE1vbmdvQ29sbGVjdGlvbihkYk5hbWUsIGNvbGxlY3Rpb25OYW1lKSB7XG4gICAgY29uc3QgY2xpZW50ID0gYXdhaXQgY29ubmVjdFRvTW9uZ28oKVxuICAgIHJldHVybiBjbGllbnQuZGIoZGJOYW1lKS5jb2xsZWN0aW9uKGNvbGxlY3Rpb25OYW1lKVxufVxuZXhwb3J0IHtcbiAgICBnZXRNb25nb0NvbGxlY3Rpb25cbn0iXSwibmFtZXMiOlsiTW9uZ29DbGllbnQiLCJVUkwiLCJwcm9jZXNzIiwiZW52IiwiTU9OR09fVVJMIiwiY2xpZW50IiwiY29ubmVjdFRvTW9uZ28iLCJjb25uZWN0IiwiZ2V0TW9uZ29Db2xsZWN0aW9uIiwiZGJOYW1lIiwiY29sbGVjdGlvbk5hbWUiLCJkYiIsImNvbGxlY3Rpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/backend-data/mongodb.js\n");

/***/ }),

/***/ "(api)/./src/backend-data/sessions.js":
/*!**************************************!*\
  !*** ./src/backend-data/sessions.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"addSession\": () => (/* binding */ addSession),\n/* harmony export */   \"deleteSession\": () => (/* binding */ deleteSession),\n/* harmony export */   \"getSessionByToken\": () => (/* binding */ getSessionByToken)\n/* harmony export */ });\nconst { ObjectId  } = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* const { generateToken } = require(\"../services/common\")\n */ const { getMongoCollection  } = __webpack_require__(/*! ./mongodb */ \"(api)/./src/backend-data/mongodb.js\");\nconst DATABASE = \"mongo-bytes4gamers\";\nconst SESSION_COLLECTION = \"sessions\";\nasync function addSession(username) {\n    const collection = await getMongoCollection(DATABASE, SESSION_COLLECTION);\n    const result = await collection.insertOne({\n        username\n    });\n    return result.insertedId;\n}\nasync function getSessionByToken(token) {\n    const collection = await getMongoCollection(DATABASE, SESSION_COLLECTION);\n    const result = await collection.findOne({\n        _id: new ObjectId(token)\n    });\n    return result;\n}\nasync function deleteSession(token) {\n    const collection = await getMongoCollection(DATABASE, SESSION_COLLECTION);\n    const result = await collection.deleteOne({\n        _id: new ObjectId(token)\n    });\n    return result;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYmFja2VuZC1kYXRhL3Nlc3Npb25zLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQU0sRUFBRUEsUUFBUSxHQUFFLEdBQUdDLG1CQUFPLENBQUMsd0JBQVMsQ0FBQztBQUN2QztDQUNDLEdBQ0QsTUFBTSxFQUFFQyxrQkFBa0IsR0FBRSxHQUFHRCxtQkFBTyxDQUFDLHNEQUFXLENBQUM7QUFFbkQsTUFBTUUsUUFBUSxHQUFHLG9CQUFvQjtBQUNyQyxNQUFNQyxrQkFBa0IsR0FBRyxVQUFVO0FBRXJDLGVBQWVDLFVBQVUsQ0FBQ0MsUUFBUSxFQUFFO0lBQ2xDLE1BQU1DLFVBQVUsR0FBRyxNQUFNTCxrQkFBa0IsQ0FBQ0MsUUFBUSxFQUFFQyxrQkFBa0IsQ0FBQztJQUN6RSxNQUFNSSxNQUFNLEdBQUcsTUFBTUQsVUFBVSxDQUFDRSxTQUFTLENBQUM7UUFBRUgsUUFBUTtLQUFFLENBQUM7SUFDdkQsT0FBT0UsTUFBTSxDQUFDRSxVQUFVLENBQUM7QUFDM0IsQ0FBQztBQUVELGVBQWVDLGlCQUFpQixDQUFDQyxLQUFLLEVBQUU7SUFDdEMsTUFBTUwsVUFBVSxHQUFHLE1BQU1MLGtCQUFrQixDQUFDQyxRQUFRLEVBQUVDLGtCQUFrQixDQUFDO0lBQ3pFLE1BQU1JLE1BQU0sR0FBRyxNQUFNRCxVQUFVLENBQUNNLE9BQU8sQ0FBQztRQUFFQyxHQUFHLEVBQUUsSUFBSWQsUUFBUSxDQUFDWSxLQUFLLENBQUM7S0FBRSxDQUFDO0lBQ3JFLE9BQU9KLE1BQU0sQ0FBQztBQUNoQixDQUFDO0FBQ0QsZUFBZU8sYUFBYSxDQUFDSCxLQUFLLEVBQUU7SUFDbEMsTUFBTUwsVUFBVSxHQUFHLE1BQU1MLGtCQUFrQixDQUFDQyxRQUFRLEVBQUVDLGtCQUFrQixDQUFDO0lBQ3pFLE1BQU1JLE1BQU0sR0FBRyxNQUFNRCxVQUFVLENBQUNTLFNBQVMsQ0FBQztRQUFFRixHQUFHLEVBQUUsSUFBSWQsUUFBUSxDQUFDWSxLQUFLLENBQUM7S0FBRSxDQUFDO0lBQ3ZFLE9BQU9KLE1BQU0sQ0FBQztBQUNoQixDQUFDO0FBRXVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnVsbHN0YWNrLy4vc3JjL2JhY2tlbmQtZGF0YS9zZXNzaW9ucy5qcz81MmRkIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgT2JqZWN0SWQgfSA9IHJlcXVpcmUoXCJtb25nb2RiXCIpO1xuLyogY29uc3QgeyBnZW5lcmF0ZVRva2VuIH0gPSByZXF1aXJlKFwiLi4vc2VydmljZXMvY29tbW9uXCIpXG4gKi9cbmNvbnN0IHsgZ2V0TW9uZ29Db2xsZWN0aW9uIH0gPSByZXF1aXJlKFwiLi9tb25nb2RiXCIpO1xuXG5jb25zdCBEQVRBQkFTRSA9IFwibW9uZ28tYnl0ZXM0Z2FtZXJzXCI7XG5jb25zdCBTRVNTSU9OX0NPTExFQ1RJT04gPSBcInNlc3Npb25zXCI7XG5cbmFzeW5jIGZ1bmN0aW9uIGFkZFNlc3Npb24odXNlcm5hbWUpIHtcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldE1vbmdvQ29sbGVjdGlvbihEQVRBQkFTRSwgU0VTU0lPTl9DT0xMRUNUSU9OKTtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29sbGVjdGlvbi5pbnNlcnRPbmUoeyB1c2VybmFtZSB9KTtcbiAgcmV0dXJuIHJlc3VsdC5pbnNlcnRlZElkO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRTZXNzaW9uQnlUb2tlbih0b2tlbikge1xuICBjb25zdCBjb2xsZWN0aW9uID0gYXdhaXQgZ2V0TW9uZ29Db2xsZWN0aW9uKERBVEFCQVNFLCBTRVNTSU9OX0NPTExFQ1RJT04pO1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmRPbmUoeyBfaWQ6IG5ldyBPYmplY3RJZCh0b2tlbikgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5hc3luYyBmdW5jdGlvbiBkZWxldGVTZXNzaW9uKHRva2VuKSB7XG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBhd2FpdCBnZXRNb25nb0NvbGxlY3Rpb24oREFUQUJBU0UsIFNFU1NJT05fQ09MTEVDVElPTik7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbGxlY3Rpb24uZGVsZXRlT25lKHsgX2lkOiBuZXcgT2JqZWN0SWQodG9rZW4pIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgeyBhZGRTZXNzaW9uLCBnZXRTZXNzaW9uQnlUb2tlbiwgZGVsZXRlU2Vzc2lvbiB9O1xuIl0sIm5hbWVzIjpbIk9iamVjdElkIiwicmVxdWlyZSIsImdldE1vbmdvQ29sbGVjdGlvbiIsIkRBVEFCQVNFIiwiU0VTU0lPTl9DT0xMRUNUSU9OIiwiYWRkU2Vzc2lvbiIsInVzZXJuYW1lIiwiY29sbGVjdGlvbiIsInJlc3VsdCIsImluc2VydE9uZSIsImluc2VydGVkSWQiLCJnZXRTZXNzaW9uQnlUb2tlbiIsInRva2VuIiwiZmluZE9uZSIsIl9pZCIsImRlbGV0ZVNlc3Npb24iLCJkZWxldGVPbmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/backend-data/sessions.js\n");

/***/ }),

/***/ "(api)/./src/backend-data/users.js":
/*!***********************************!*\
  !*** ./src/backend-data/users.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"addUser\": () => (/* binding */ addUser),\n/* harmony export */   \"getUserByEmail\": () => (/* binding */ getUserByEmail),\n/* harmony export */   \"getUserById\": () => (/* binding */ getUserById),\n/* harmony export */   \"getUserByUsername\": () => (/* binding */ getUserByUsername)\n/* harmony export */ });\nconst { getMongoCollection  } = __webpack_require__(/*! ./mongodb */ \"(api)/./src/backend-data/mongodb.js\");\nconst DATABASE = \"mongo-bytes4gamers\";\nconst USER_COLLECTION = \"users\";\nasync function getUserByUsername(username) {\n    const collection = await getMongoCollection(DATABASE, USER_COLLECTION);\n    const result = await collection.findOne({\n        username\n    });\n    return result;\n}\nasync function getUserByEmail(email) {\n    const collection = await getMongoCollection(DATABASE, USER_COLLECTION);\n    const result = await collection.findOne({\n        email\n    });\n    return result;\n}\nasync function getUserById(userId) {\n    const collection = await getMongoCollection(DATABASE, USER_COLLECTION);\n    const result = await collection.findOne({\n        _id: userId\n    });\n    return result;\n}\nasync function addUser(user) {\n    const collection = await getMongoCollection(DATABASE, USER_COLLECTION);\n    const result = await collection.insertOne(user);\n    return result.insertedId;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYmFja2VuZC1kYXRhL3VzZXJzLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxNQUFNLEVBQUVBLGtCQUFrQixHQUFFLEdBQUdDLG1CQUFPLENBQUMsc0RBQVcsQ0FBQztBQUVuRCxNQUFNQyxRQUFRLEdBQUcsb0JBQW9CO0FBQ3JDLE1BQU1DLGVBQWUsR0FBRyxPQUFPO0FBRS9CLGVBQWVDLGlCQUFpQixDQUFDQyxRQUFRLEVBQUU7SUFDekMsTUFBTUMsVUFBVSxHQUFHLE1BQU1OLGtCQUFrQixDQUFDRSxRQUFRLEVBQUVDLGVBQWUsQ0FBQztJQUN0RSxNQUFNSSxNQUFNLEdBQUcsTUFBTUQsVUFBVSxDQUFDRSxPQUFPLENBQUM7UUFBRUgsUUFBUTtLQUFFLENBQUM7SUFDckQsT0FBT0UsTUFBTSxDQUFDO0FBQ2hCLENBQUM7QUFDRCxlQUFlRSxjQUFjLENBQUNDLEtBQUssRUFBRTtJQUNuQyxNQUFNSixVQUFVLEdBQUcsTUFBTU4sa0JBQWtCLENBQUNFLFFBQVEsRUFBRUMsZUFBZSxDQUFDO0lBQ3RFLE1BQU1JLE1BQU0sR0FBRyxNQUFNRCxVQUFVLENBQUNFLE9BQU8sQ0FBQztRQUFFRSxLQUFLO0tBQUUsQ0FBQztJQUNsRCxPQUFPSCxNQUFNLENBQUM7QUFDaEIsQ0FBQztBQUNELGVBQWVJLFdBQVcsQ0FBQ0MsTUFBTSxFQUFFO0lBQ2pDLE1BQU1OLFVBQVUsR0FBRyxNQUFNTixrQkFBa0IsQ0FBQ0UsUUFBUSxFQUFFQyxlQUFlLENBQUM7SUFDdEUsTUFBTUksTUFBTSxHQUFHLE1BQU1ELFVBQVUsQ0FBQ0UsT0FBTyxDQUFDO1FBQUVLLEdBQUcsRUFBRUQsTUFBTTtLQUFFLENBQUM7SUFDeEQsT0FBT0wsTUFBTSxDQUFDO0FBQ2hCLENBQUM7QUFFRCxlQUFlTyxPQUFPLENBQUNDLElBQUksRUFBRTtJQUMzQixNQUFNVCxVQUFVLEdBQUcsTUFBTU4sa0JBQWtCLENBQUNFLFFBQVEsRUFBRUMsZUFBZSxDQUFDO0lBQ3RFLE1BQU1JLE1BQU0sR0FBRyxNQUFNRCxVQUFVLENBQUNVLFNBQVMsQ0FBQ0QsSUFBSSxDQUFDO0lBQy9DLE9BQU9SLE1BQU0sQ0FBQ1UsVUFBVSxDQUFDO0FBQzNCLENBQUM7QUFFa0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mdWxsc3RhY2svLi9zcmMvYmFja2VuZC1kYXRhL3VzZXJzLmpzP2QwZmEiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBnZXRNb25nb0NvbGxlY3Rpb24gfSA9IHJlcXVpcmUoXCIuL21vbmdvZGJcIik7XG5cbmNvbnN0IERBVEFCQVNFID0gXCJtb25nby1ieXRlczRnYW1lcnNcIjtcbmNvbnN0IFVTRVJfQ09MTEVDVElPTiA9IFwidXNlcnNcIjtcblxuYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5VXNlcm5hbWUodXNlcm5hbWUpIHtcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldE1vbmdvQ29sbGVjdGlvbihEQVRBQkFTRSwgVVNFUl9DT0xMRUNUSU9OKTtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29sbGVjdGlvbi5maW5kT25lKHsgdXNlcm5hbWUgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5hc3luYyBmdW5jdGlvbiBnZXRVc2VyQnlFbWFpbChlbWFpbCkge1xuICBjb25zdCBjb2xsZWN0aW9uID0gYXdhaXQgZ2V0TW9uZ29Db2xsZWN0aW9uKERBVEFCQVNFLCBVU0VSX0NPTExFQ1RJT04pO1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmRPbmUoeyBlbWFpbCB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdldFVzZXJCeUlkKHVzZXJJZCkge1xuICBjb25zdCBjb2xsZWN0aW9uID0gYXdhaXQgZ2V0TW9uZ29Db2xsZWN0aW9uKERBVEFCQVNFLCBVU0VSX0NPTExFQ1RJT04pO1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmRPbmUoeyBfaWQ6IHVzZXJJZCB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gYWRkVXNlcih1c2VyKSB7XG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBhd2FpdCBnZXRNb25nb0NvbGxlY3Rpb24oREFUQUJBU0UsIFVTRVJfQ09MTEVDVElPTik7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbGxlY3Rpb24uaW5zZXJ0T25lKHVzZXIpO1xuICByZXR1cm4gcmVzdWx0Lmluc2VydGVkSWQ7XG59XG5cbmV4cG9ydCB7IGdldFVzZXJCeVVzZXJuYW1lLCBnZXRVc2VyQnlFbWFpbCwgYWRkVXNlciwgZ2V0VXNlckJ5SWQgfTtcbiJdLCJuYW1lcyI6WyJnZXRNb25nb0NvbGxlY3Rpb24iLCJyZXF1aXJlIiwiREFUQUJBU0UiLCJVU0VSX0NPTExFQ1RJT04iLCJnZXRVc2VyQnlVc2VybmFtZSIsInVzZXJuYW1lIiwiY29sbGVjdGlvbiIsInJlc3VsdCIsImZpbmRPbmUiLCJnZXRVc2VyQnlFbWFpbCIsImVtYWlsIiwiZ2V0VXNlckJ5SWQiLCJ1c2VySWQiLCJfaWQiLCJhZGRVc2VyIiwidXNlciIsImluc2VydE9uZSIsImluc2VydGVkSWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/backend-data/users.js\n");

/***/ }),

/***/ "(api)/./src/backend-services/common.js":
/*!****************************************!*\
  !*** ./src/backend-services/common.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"checkIfEmailExists\": () => (/* binding */ checkIfEmailExists),\n/* harmony export */   \"checkIfUserExists\": () => (/* binding */ checkIfUserExists),\n/* harmony export */   \"checkPasswordStrength\": () => (/* binding */ checkPasswordStrength),\n/* harmony export */   \"generateToken\": () => (/* binding */ generateToken),\n/* harmony export */   \"validateEmail\": () => (/* binding */ validateEmail)\n/* harmony export */ });\n/* harmony import */ var _backend_data_users__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../backend-data/users */ \"(api)/./src/backend-data/users.js\");\n\nfunction generateToken(email) {\n    return email.split(\"\").map((e, i)=>String.fromCharCode(e.charCodeAt(0) + (i % 4 + 1) * 2)).join(\"\");\n}\nfunction validateEmail(email) {\n    // Esta expressão regular não garante que email existe, nem que é válido\n    // No entanto deverá funcionar para a maior parte dos emails que seja necessário validar.\n    const EMAIL_REGEX = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return EMAIL_REGEX.test(email);\n}\nfunction checkPasswordStrength(password) {\n    if (password.length < 8) return 0;\n    const regexes = [\n        /[a-z]/,\n        /[A-Z]/,\n        /[0-9]/,\n        /[~!@#$%^&*)(+=._-]/\n    ];\n    return regexes.map((re)=>re.test(password)).reduce((score, t)=>t ? score + 1 : score, 0);\n}\nasync function checkIfEmailExists(email) {\n    const user = await (0,_backend_data_users__WEBPACK_IMPORTED_MODULE_0__.getUserByEmail)(email);\n    return user !== null;\n}\nasync function checkIfUserExists(username) {\n    const user = await (0,_backend_data_users__WEBPACK_IMPORTED_MODULE_0__.getUserByUsername)(username);\n    return user !== null;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYmFja2VuZC1zZXJ2aWNlcy9jb21tb24uanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTBFO0FBRTFFLFNBQVNFLGFBQWEsQ0FBQ0MsS0FBSyxFQUFFO0lBQzFCLE9BQU9BLEtBQUssQ0FDUEMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUNUQyxHQUFHLENBQUMsQ0FBQ0MsQ0FBQyxFQUFFQyxDQUFDLEdBQUtDLE1BQU0sQ0FBQ0MsWUFBWSxDQUFDSCxDQUFDLENBQUNJLFVBQVUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDSCxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUNyRUksSUFBSSxDQUFDLEVBQUUsQ0FBQztBQUNqQixDQUFDO0FBRUQsU0FBU0MsYUFBYSxDQUFDVCxLQUFLLEVBQUU7SUFDMUIsd0VBQXdFO0lBQ3hFLHlGQUF5RjtJQUN6RixNQUFNVSxXQUFXLDBKQUEwSjtJQUMzSyxPQUFPQSxXQUFXLENBQUNDLElBQUksQ0FBQ1gsS0FBSyxDQUFDO0FBQ2xDLENBQUM7QUFFRCxTQUFTWSxxQkFBcUIsQ0FBQ0MsUUFBUSxFQUFFO0lBQ3JDLElBQUlBLFFBQVEsQ0FBQ0MsTUFBTSxHQUFHLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUNsQyxNQUFNQyxPQUFPLEdBQUc7Ozs7O0tBS2Y7SUFDRCxPQUFPQSxPQUFPLENBQ1RiLEdBQUcsQ0FBQ2MsQ0FBQUEsRUFBRSxHQUFJQSxFQUFFLENBQUNMLElBQUksQ0FBQ0UsUUFBUSxDQUFDLENBQUMsQ0FDNUJJLE1BQU0sQ0FBQyxDQUFDQyxLQUFLLEVBQUVDLENBQUMsR0FBS0EsQ0FBQyxHQUFHRCxLQUFLLEdBQUcsQ0FBQyxHQUFHQSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0FBQ3ZELENBQUM7QUFFRCxlQUFlRSxrQkFBa0IsQ0FBQ3BCLEtBQUssRUFBRTtJQUN6QyxNQUFNcUIsSUFBSSxHQUFHLE1BQU14QixtRUFBYyxDQUFDRyxLQUFLLENBQUM7SUFDeEMsT0FBT3FCLElBQUksS0FBSyxJQUFJO0FBQ3BCLENBQUM7QUFDRCxlQUFlQyxpQkFBaUIsQ0FBQ0MsUUFBUSxFQUFFO0lBQzNDLE1BQU1GLElBQUksR0FBRyxNQUFNdkIsc0VBQWlCLENBQUN5QixRQUFRLENBQUM7SUFDOUMsT0FBT0YsSUFBSSxLQUFLLElBQUk7QUFDcEIsQ0FBQztBQU9BIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnVsbHN0YWNrLy4vc3JjL2JhY2tlbmQtc2VydmljZXMvY29tbW9uLmpzPzdhOWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0VXNlckJ5RW1haWwsIGdldFVzZXJCeVVzZXJuYW1lIH0gZnJvbSBcIi4uL2JhY2tlbmQtZGF0YS91c2Vyc1wiO1xuXG5mdW5jdGlvbiBnZW5lcmF0ZVRva2VuKGVtYWlsKSB7XG4gICAgcmV0dXJuIGVtYWlsXG4gICAgICAgIC5zcGxpdCgnJylcbiAgICAgICAgLm1hcCgoZSwgaSkgPT4gU3RyaW5nLmZyb21DaGFyQ29kZShlLmNoYXJDb2RlQXQoMCkgKyAoaSAlIDQgKyAxKSAqIDIpKVxuICAgICAgICAuam9pbignJylcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVFbWFpbChlbWFpbCkge1xuICAgIC8vIEVzdGEgZXhwcmVzc8OjbyByZWd1bGFyIG7Do28gZ2FyYW50ZSBxdWUgZW1haWwgZXhpc3RlLCBuZW0gcXVlIMOpIHbDoWxpZG9cbiAgICAvLyBObyBlbnRhbnRvIGRldmVyw6EgZnVuY2lvbmFyIHBhcmEgYSBtYWlvciBwYXJ0ZSBkb3MgZW1haWxzIHF1ZSBzZWphIG5lY2Vzc8OhcmlvIHZhbGlkYXIuXG4gICAgY29uc3QgRU1BSUxfUkVHRVggPSAvXigoW148PigpW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC9cbiAgICByZXR1cm4gRU1BSUxfUkVHRVgudGVzdChlbWFpbClcbn1cblxuZnVuY3Rpb24gY2hlY2tQYXNzd29yZFN0cmVuZ3RoKHBhc3N3b3JkKSB7XG4gICAgaWYgKHBhc3N3b3JkLmxlbmd0aCA8IDgpIHJldHVybiAwO1xuICAgIGNvbnN0IHJlZ2V4ZXMgPSBbXG4gICAgICAgIC9bYS16XS8sXG4gICAgICAgIC9bQS1aXS8sXG4gICAgICAgIC9bMC05XS8sXG4gICAgICAgIC9bfiFAIyQlXiYqKSgrPS5fLV0vXG4gICAgXVxuICAgIHJldHVybiByZWdleGVzXG4gICAgICAgIC5tYXAocmUgPT4gcmUudGVzdChwYXNzd29yZCkpXG4gICAgICAgIC5yZWR1Y2UoKHNjb3JlLCB0KSA9PiB0ID8gc2NvcmUgKyAxIDogc2NvcmUsIDApXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNoZWNrSWZFbWFpbEV4aXN0cyhlbWFpbCkge1xuY29uc3QgdXNlciA9IGF3YWl0IGdldFVzZXJCeUVtYWlsKGVtYWlsKVxucmV0dXJuIHVzZXIgIT09IG51bGxcbn1cbmFzeW5jIGZ1bmN0aW9uIGNoZWNrSWZVc2VyRXhpc3RzKHVzZXJuYW1lKSB7XG5jb25zdCB1c2VyID0gYXdhaXQgZ2V0VXNlckJ5VXNlcm5hbWUodXNlcm5hbWUpXG5yZXR1cm4gdXNlciAhPT0gbnVsbFxufVxuZXhwb3J0IHtcbiAgICBnZW5lcmF0ZVRva2VuLFxuICAgIHZhbGlkYXRlRW1haWwsXG4gICAgY2hlY2tQYXNzd29yZFN0cmVuZ3RoLFxuICAgIGNoZWNrSWZFbWFpbEV4aXN0cyxcbiAgICBjaGVja0lmVXNlckV4aXN0c1xufSJdLCJuYW1lcyI6WyJnZXRVc2VyQnlFbWFpbCIsImdldFVzZXJCeVVzZXJuYW1lIiwiZ2VuZXJhdGVUb2tlbiIsImVtYWlsIiwic3BsaXQiLCJtYXAiLCJlIiwiaSIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImNoYXJDb2RlQXQiLCJqb2luIiwidmFsaWRhdGVFbWFpbCIsIkVNQUlMX1JFR0VYIiwidGVzdCIsImNoZWNrUGFzc3dvcmRTdHJlbmd0aCIsInBhc3N3b3JkIiwibGVuZ3RoIiwicmVnZXhlcyIsInJlIiwicmVkdWNlIiwic2NvcmUiLCJ0IiwiY2hlY2tJZkVtYWlsRXhpc3RzIiwidXNlciIsImNoZWNrSWZVc2VyRXhpc3RzIiwidXNlcm5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/backend-services/common.js\n");

/***/ }),

/***/ "(api)/./src/backend-services/validations.js":
/*!*********************************************!*\
  !*** ./src/backend-services/validations.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"validateFields\": () => (/* binding */ validateFields)\n/* harmony export */ });\nconst { checkIfEmailExists , checkIfUserExists  } = __webpack_require__(/*! ./common */ \"(api)/./src/backend-services/common.js\");\nconst { checkPasswordStrength , validateEmail  } = __webpack_require__(/*! ./common */ \"(api)/./src/backend-services/common.js\");\nasync function validateFields({ username , email , password , passwordConfirmation , acceptsTerms , acceptsCommunications  }) {\n    const errors = cleanUndefinedProperties({\n        username: await getUserErrors(username),\n        email: await getEmailErrors(email),\n        password: getPasswordErrors(password),\n        passwordConfirmation: getPasswordConfirmationErrors(passwordConfirmation, password),\n        acceptsTerms: getAcceptsTermsErrors(acceptsTerms)\n    });\n    const success = Object.keys(errors).length === 0;\n    return cleanUndefinedProperties({\n        success: success,\n        errors: success ? undefined : errors\n    });\n}\nfunction checkRequiredValueMissing(value) {\n    return value === undefined || value.length === 0;\n}\nasync function getUserErrors(username) {\n    if (checkRequiredValueMissing(username)) {\n        return \"Por favor introduza o seu endere\\xe7o de username.\";\n    }\n    if (await checkIfUserExists(username)) {\n        return \"O username introduzido j\\xe1 est\\xe1 registado.\";\n    }\n}\nasync function getEmailErrors(email) {\n    if (checkRequiredValueMissing(email)) {\n        return \"Por favor introduza o seu endere\\xe7o de email.\";\n    }\n    if (!validateEmail(email)) {\n        return \"Por favor introduza um endere\\xe7o de email v\\xe1lido.\";\n    }\n    if (await checkIfEmailExists(email)) {\n        return \"O endere\\xe7o introduzido j\\xe1 est\\xe1 registado.\";\n    }\n}\nfunction getPasswordErrors(password) {\n    if (checkRequiredValueMissing(password)) {\n        return \"Por favor introduza a sua password.\";\n    }\n    if (password.length < 8) {\n        return \"A sua password deve ter no m\\xednimo 8 caracteres.\";\n    }\n    if (checkPasswordStrength(password) < 4) {\n        return \"A sua password deve ter pelo menos um n\\xfamero, uma m\\xednuscula, uma mai\\xfascula e um s\\xedmbolo.\";\n    }\n}\nfunction getPasswordConfirmationErrors(passwordConfirmation, password) {\n    if (checkRequiredValueMissing(passwordConfirmation)) {\n        return \"Por favor introduza novamente a sua password.\";\n    }\n    if (password !== passwordConfirmation) {\n        return \"As passwords n\\xe3o coincidem.\";\n    }\n}\nfunction getAcceptsTermsErrors(acceptsTerms) {\n    if (!acceptsTerms) {\n        return \"Tem de aceitar os termos e condi\\xe7\\xf5es para criar a sua conta.\";\n    }\n}\nfunction cleanUndefinedProperties(obj) {\n    return Object.keys(obj).reduce((acc, p)=>obj[p] !== undefined ? {\n            ...acc,\n            [p]: obj[p]\n        } : acc, {});\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYmFja2VuZC1zZXJ2aWNlcy92YWxpZGF0aW9ucy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsTUFBTSxFQUFFQSxrQkFBa0IsR0FBRUMsaUJBQWlCLEdBQUUsR0FBR0MsbUJBQU8sQ0FBQyx3REFBVSxDQUFDO0FBQ3JFLE1BQU0sRUFBRUMscUJBQXFCLEdBQUVDLGFBQWEsR0FBRSxHQUFHRixtQkFBTyxDQUFDLHdEQUFVLENBQUM7QUFFcEUsZUFBZUcsY0FBYyxDQUFDLEVBQzFCQyxRQUFRLEdBQ1JDLEtBQUssR0FDTEMsUUFBUSxHQUNSQyxvQkFBb0IsR0FDcEJDLFlBQVksR0FDWkMscUJBQXFCLEdBQ3hCLEVBQUU7SUFDQyxNQUFNQyxNQUFNLEdBQUdDLHdCQUF3QixDQUFDO1FBQ3BDUCxRQUFRLEVBQUUsTUFBTVEsYUFBYSxDQUFDUixRQUFRLENBQUM7UUFDdkNDLEtBQUssRUFBRSxNQUFNUSxjQUFjLENBQUNSLEtBQUssQ0FBQztRQUNsQ0MsUUFBUSxFQUFFUSxpQkFBaUIsQ0FBQ1IsUUFBUSxDQUFDO1FBQ3JDQyxvQkFBb0IsRUFBRVEsNkJBQTZCLENBQUNSLG9CQUFvQixFQUFFRCxRQUFRLENBQUM7UUFDbkZFLFlBQVksRUFBRVEscUJBQXFCLENBQUNSLFlBQVksQ0FBQztLQUNwRCxDQUFDO0lBSUYsTUFBTVMsT0FBTyxHQUFHQyxNQUFNLENBQUNDLElBQUksQ0FBQ1QsTUFBTSxDQUFDLENBQUNVLE1BQU0sS0FBSyxDQUFDO0lBQ2hELE9BQU9ULHdCQUF3QixDQUFDO1FBQzVCTSxPQUFPLEVBQUVBLE9BQU87UUFDaEJQLE1BQU0sRUFBRU8sT0FBTyxHQUFHSSxTQUFTLEdBQUdYLE1BQU07S0FDdkMsQ0FBQztBQUNOLENBQUM7QUFFRCxTQUFTWSx5QkFBeUIsQ0FBQ0MsS0FBSyxFQUFFO0lBQ3RDLE9BQU9BLEtBQUssS0FBS0YsU0FBUyxJQUFJRSxLQUFLLENBQUNILE1BQU0sS0FBSyxDQUFDO0FBQ3BELENBQUM7QUFFRCxlQUFlUixhQUFhLENBQUNSLFFBQVEsRUFBRTtJQUNuQyxJQUFJa0IseUJBQXlCLENBQUNsQixRQUFRLENBQUMsRUFBRTtRQUNyQyxPQUFPLG9EQUFpRDtJQUM1RCxDQUFDO0lBQ0QsSUFBSSxNQUFNTCxpQkFBaUIsQ0FBQ0ssUUFBUSxDQUFDLEVBQUU7UUFDbkMsT0FBTyxpREFBMkM7SUFDdEQsQ0FBQztBQUNMLENBQUM7QUFFRCxlQUFlUyxjQUFjLENBQUNSLEtBQUssRUFBRTtJQUNqQyxJQUFJaUIseUJBQXlCLENBQUNqQixLQUFLLENBQUMsRUFBRTtRQUNsQyxPQUFPLGlEQUE4QztJQUN6RCxDQUFDO0lBQ0QsSUFBSSxDQUFDSCxhQUFhLENBQUNHLEtBQUssQ0FBQyxFQUFFO1FBQ3ZCLE9BQU8sd0RBQWtEO0lBQzdELENBQUM7SUFDRCxJQUFJLE1BQU1QLGtCQUFrQixDQUFDTyxLQUFLLENBQUMsRUFBRTtRQUNqQyxPQUFPLG9EQUEyQztJQUN0RCxDQUFDO0FBQ0wsQ0FBQztBQUVELFNBQVNTLGlCQUFpQixDQUFDUixRQUFRLEVBQUU7SUFDakMsSUFBSWdCLHlCQUF5QixDQUFDaEIsUUFBUSxDQUFDLEVBQUU7UUFDckMsT0FBTyxxQ0FBcUM7SUFDaEQsQ0FBQztJQUNELElBQUlBLFFBQVEsQ0FBQ2MsTUFBTSxHQUFHLENBQUMsRUFBRTtRQUNyQixPQUFPLG9EQUFpRDtJQUM1RCxDQUFDO0lBQ0QsSUFBSW5CLHFCQUFxQixDQUFDSyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUU7UUFDckMsT0FBTyxzR0FBMEY7SUFDckcsQ0FBQztBQUNMLENBQUM7QUFFRCxTQUFTUyw2QkFBNkIsQ0FBQ1Isb0JBQW9CLEVBQUVELFFBQVEsRUFBRTtJQUNuRSxJQUFJZ0IseUJBQXlCLENBQUNmLG9CQUFvQixDQUFDLEVBQUU7UUFDakQsT0FBTywrQ0FBK0M7SUFDMUQsQ0FBQztJQUNELElBQUlELFFBQVEsS0FBS0Msb0JBQW9CLEVBQUU7UUFDbkMsT0FBTyxnQ0FBNkI7SUFDeEMsQ0FBQztBQUNMLENBQUM7QUFFRCxTQUFTUyxxQkFBcUIsQ0FBQ1IsWUFBWSxFQUFFO0lBQ3pDLElBQUksQ0FBQ0EsWUFBWSxFQUFFO1FBQ2YsT0FBTyxvRUFBOEQ7SUFDekUsQ0FBQztBQUNMLENBQUM7QUFFRCxTQUFTRyx3QkFBd0IsQ0FBQ2EsR0FBRyxFQUFFO0lBQ25DLE9BQU9OLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDSyxHQUFHLENBQUMsQ0FDbEJDLE1BQU0sQ0FBQyxDQUFDQyxHQUFHLEVBQUVDLENBQUMsR0FDWEgsR0FBRyxDQUFDRyxDQUFDLENBQUMsS0FBS04sU0FBUyxHQUNiO1lBQUUsR0FBR0ssR0FBRztZQUFFLENBQUNDLENBQUMsQ0FBQyxFQUFFSCxHQUFHLENBQUNHLENBQUMsQ0FBQztTQUFFLEdBQ3hCRCxHQUFHLEVBQ1QsRUFBRSxDQUFDO0FBQ2YsQ0FBQztBQUlBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnVsbHN0YWNrLy4vc3JjL2JhY2tlbmQtc2VydmljZXMvdmFsaWRhdGlvbnMuanM/NDZmNCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IGNoZWNrSWZFbWFpbEV4aXN0cywgY2hlY2tJZlVzZXJFeGlzdHMgfSA9IHJlcXVpcmUoXCIuL2NvbW1vblwiKVxuY29uc3QgeyBjaGVja1Bhc3N3b3JkU3RyZW5ndGgsIHZhbGlkYXRlRW1haWwgfSA9IHJlcXVpcmUoXCIuL2NvbW1vblwiKVxuXG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZUZpZWxkcyh7XG4gICAgdXNlcm5hbWUsXG4gICAgZW1haWwsXG4gICAgcGFzc3dvcmQsXG4gICAgcGFzc3dvcmRDb25maXJtYXRpb24sXG4gICAgYWNjZXB0c1Rlcm1zLFxuICAgIGFjY2VwdHNDb21tdW5pY2F0aW9uc1xufSkge1xuICAgIGNvbnN0IGVycm9ycyA9IGNsZWFuVW5kZWZpbmVkUHJvcGVydGllcyh7XG4gICAgICAgIHVzZXJuYW1lOiBhd2FpdCBnZXRVc2VyRXJyb3JzKHVzZXJuYW1lKSxcbiAgICAgICAgZW1haWw6IGF3YWl0IGdldEVtYWlsRXJyb3JzKGVtYWlsKSxcbiAgICAgICAgcGFzc3dvcmQ6IGdldFBhc3N3b3JkRXJyb3JzKHBhc3N3b3JkKSxcbiAgICAgICAgcGFzc3dvcmRDb25maXJtYXRpb246IGdldFBhc3N3b3JkQ29uZmlybWF0aW9uRXJyb3JzKHBhc3N3b3JkQ29uZmlybWF0aW9uLCBwYXNzd29yZCksXG4gICAgICAgIGFjY2VwdHNUZXJtczogZ2V0QWNjZXB0c1Rlcm1zRXJyb3JzKGFjY2VwdHNUZXJtcyksXG4gICAgfSlcblxuXG5cbiAgICBjb25zdCBzdWNjZXNzID0gT2JqZWN0LmtleXMoZXJyb3JzKS5sZW5ndGggPT09IDBcbiAgICByZXR1cm4gY2xlYW5VbmRlZmluZWRQcm9wZXJ0aWVzKHtcbiAgICAgICAgc3VjY2Vzczogc3VjY2VzcyxcbiAgICAgICAgZXJyb3JzOiBzdWNjZXNzID8gdW5kZWZpbmVkIDogZXJyb3JzXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gY2hlY2tSZXF1aXJlZFZhbHVlTWlzc2luZyh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlLmxlbmd0aCA9PT0gMFxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRVc2VyRXJyb3JzKHVzZXJuYW1lKSB7XG4gICAgaWYgKGNoZWNrUmVxdWlyZWRWYWx1ZU1pc3NpbmcodXNlcm5hbWUpKSB7XG4gICAgICAgIHJldHVybiBcIlBvciBmYXZvciBpbnRyb2R1emEgbyBzZXUgZW5kZXJlw6dvIGRlIHVzZXJuYW1lLlwiXG4gICAgfVxuICAgIGlmIChhd2FpdCBjaGVja0lmVXNlckV4aXN0cyh1c2VybmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIFwiTyB1c2VybmFtZSBpbnRyb2R1emlkbyBqw6EgZXN0w6EgcmVnaXN0YWRvLlwiXG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRFbWFpbEVycm9ycyhlbWFpbCkge1xuICAgIGlmIChjaGVja1JlcXVpcmVkVmFsdWVNaXNzaW5nKGVtYWlsKSkge1xuICAgICAgICByZXR1cm4gXCJQb3IgZmF2b3IgaW50cm9kdXphIG8gc2V1IGVuZGVyZcOnbyBkZSBlbWFpbC5cIlxuICAgIH1cbiAgICBpZiAoIXZhbGlkYXRlRW1haWwoZW1haWwpKSB7XG4gICAgICAgIHJldHVybiBcIlBvciBmYXZvciBpbnRyb2R1emEgdW0gZW5kZXJlw6dvIGRlIGVtYWlsIHbDoWxpZG8uXCJcbiAgICB9XG4gICAgaWYgKGF3YWl0IGNoZWNrSWZFbWFpbEV4aXN0cyhlbWFpbCkpIHtcbiAgICAgICAgcmV0dXJuIFwiTyBlbmRlcmXDp28gaW50cm9kdXppZG8gasOhIGVzdMOhIHJlZ2lzdGFkby5cIlxuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0UGFzc3dvcmRFcnJvcnMocGFzc3dvcmQpIHtcbiAgICBpZiAoY2hlY2tSZXF1aXJlZFZhbHVlTWlzc2luZyhwYXNzd29yZCkpIHtcbiAgICAgICAgcmV0dXJuIFwiUG9yIGZhdm9yIGludHJvZHV6YSBhIHN1YSBwYXNzd29yZC5cIlxuICAgIH1cbiAgICBpZiAocGFzc3dvcmQubGVuZ3RoIDwgOCkge1xuICAgICAgICByZXR1cm4gXCJBIHN1YSBwYXNzd29yZCBkZXZlIHRlciBubyBtw61uaW1vIDggY2FyYWN0ZXJlcy5cIlxuICAgIH1cbiAgICBpZiAoY2hlY2tQYXNzd29yZFN0cmVuZ3RoKHBhc3N3b3JkKSA8IDQpIHtcbiAgICAgICAgcmV0dXJuIFwiQSBzdWEgcGFzc3dvcmQgZGV2ZSB0ZXIgcGVsbyBtZW5vcyB1bSBuw7ptZXJvLCB1bWEgbcOtbnVzY3VsYSwgdW1hIG1hacO6c2N1bGEgZSB1bSBzw61tYm9sby5cIlxuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0UGFzc3dvcmRDb25maXJtYXRpb25FcnJvcnMocGFzc3dvcmRDb25maXJtYXRpb24sIHBhc3N3b3JkKSB7XG4gICAgaWYgKGNoZWNrUmVxdWlyZWRWYWx1ZU1pc3NpbmcocGFzc3dvcmRDb25maXJtYXRpb24pKSB7XG4gICAgICAgIHJldHVybiBcIlBvciBmYXZvciBpbnRyb2R1emEgbm92YW1lbnRlIGEgc3VhIHBhc3N3b3JkLlwiXG4gICAgfVxuICAgIGlmIChwYXNzd29yZCAhPT0gcGFzc3dvcmRDb25maXJtYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIFwiQXMgcGFzc3dvcmRzIG7Do28gY29pbmNpZGVtLlwiXG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRBY2NlcHRzVGVybXNFcnJvcnMoYWNjZXB0c1Rlcm1zKSB7XG4gICAgaWYgKCFhY2NlcHRzVGVybXMpIHtcbiAgICAgICAgcmV0dXJuIFwiVGVtIGRlIGFjZWl0YXIgb3MgdGVybW9zIGUgY29uZGnDp8O1ZXMgcGFyYSBjcmlhciBhIHN1YSBjb250YS5cIlxuICAgIH1cbn1cblxuZnVuY3Rpb24gY2xlYW5VbmRlZmluZWRQcm9wZXJ0aWVzKG9iaikge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopXG4gICAgICAgIC5yZWR1Y2UoKGFjYywgcCkgPT5cbiAgICAgICAgICAgIG9ialtwXSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyAoeyAuLi5hY2MsIFtwXTogb2JqW3BdIH0pXG4gICAgICAgICAgICAgICAgOiBhY2MsXG4gICAgICAgICAgICB7fSlcbn1cblxuZXhwb3J0IHtcbiAgICB2YWxpZGF0ZUZpZWxkc1xufSJdLCJuYW1lcyI6WyJjaGVja0lmRW1haWxFeGlzdHMiLCJjaGVja0lmVXNlckV4aXN0cyIsInJlcXVpcmUiLCJjaGVja1Bhc3N3b3JkU3RyZW5ndGgiLCJ2YWxpZGF0ZUVtYWlsIiwidmFsaWRhdGVGaWVsZHMiLCJ1c2VybmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJwYXNzd29yZENvbmZpcm1hdGlvbiIsImFjY2VwdHNUZXJtcyIsImFjY2VwdHNDb21tdW5pY2F0aW9ucyIsImVycm9ycyIsImNsZWFuVW5kZWZpbmVkUHJvcGVydGllcyIsImdldFVzZXJFcnJvcnMiLCJnZXRFbWFpbEVycm9ycyIsImdldFBhc3N3b3JkRXJyb3JzIiwiZ2V0UGFzc3dvcmRDb25maXJtYXRpb25FcnJvcnMiLCJnZXRBY2NlcHRzVGVybXNFcnJvcnMiLCJzdWNjZXNzIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImNoZWNrUmVxdWlyZWRWYWx1ZU1pc3NpbmciLCJ2YWx1ZSIsIm9iaiIsInJlZHVjZSIsImFjYyIsInAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/backend-services/validations.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/login.js"));
module.exports = __webpack_exports__;

})();